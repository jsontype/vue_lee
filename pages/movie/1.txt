import React, { useState, useEffect } from 'react'
import Loading from './Loading'
// CSS
import './Movies.css'

// https://yts.mx/api/v2/list_movies.json?sort_by=rating
export default function Movies() {
	const [movies, setMovies] = useState([])
	// ë¦¬ì•¡íŠ¸ëŠ” ë¬´ì¡°ê±´ ë³€ìˆ˜ë¥¼ useStateë¡œ ë§Œë“ ë‹¤!!!
	

	useEffect(() => {
		
		fetch('https://yts.mx/api/v2/list_movies.json?sort_by=rating')
		// fetch('https://yts.mx/api/v2/list_movies.json')
			// .then(res => console.log(res.json()))
			// ë¹„ë™ê¸°ë¡œ ì•½ì†ì„ í•¨. res.jsonê°’ì´ ë“¤ì–´ê°ˆê±°ë‹¤
			.then(res => res.json())
			.then(json => { setMovies(json.data.movies); })
			

	}, [])



	// returnê°’ìœ¼ë¡œì¨ htmlë Œë”ë§
	const render = () => { 
		console.log('movie: ', movies)
		return movies.map(item => {
			return (
				<div key={item.id} className="movieContainer">
						<a class="movieTitle" href={item.url}> {item.title} ({item.year}) {item.rating >= 9 && 'ğŸ”¥'}</a>
						<div className="movieDetail">
							<img className="movieImage" src={item.large_cover_image} alt={item.title}/>
							<div className="movieDescription">
								<div className={item.rating >= 9 ? 'good' : item.rating >= 7 ? 'notBad' : 'bad'}>í‰ì : {item.rating ? item.rating + ' / 10ì ' : 'ì •ë³´ì—†ìŒ'}</div>
								<div>ì¥ë¥´: {item.genres.join(', ')}</div>
								<div>ìƒì˜ì‹œê°„: {item.runtime ? item.runtime + 'ë¶„' : 'ì •ë³´ì—†ìŒ'}</div>
								{/* ìš”ì•½ì´ ê¸´ ì˜í™”ì— ê¸´ìš”ì•½ì„ tooltipìœ¼ë¡œ ë§Œë“¤ìˆ˜ìˆëŠ”ì§€ ì°¾ì•„ë³´ê¸° */}
								<div>ìš”ì•½: {item.summary || 'ì •ë³´ì—†ìŒ'}</div>
								{/* torrent.urlì´ í•œê°œ ì´ìƒì¼ ë•Œ mapìœ¼ë¡œ ë§Œë“¤ì–´ì„œ  */}
								<div>í† ë ŒíŠ¸: {item.torrents.map((tor, idx) => { return (
									<span>
										<a href={tor.url}>#{idx + 1}</a>{' '}
										{/* <div>í† ë ŒíŠ¸ ì£¼ì†Œ : {item.torrent.url}</div>
										<div>í† ë ŒíŠ¸ í€„ë¦¬í‹° : {item.torrent.quality}</div>
										<div>í† ë ŒíŠ¸ ì‚¬ì´ì¦ˆ : {item.torrent.size}</div> */}
									</span>
								)})}
								</div>
							</div>
						</div>
					</div>
				)
			})
		}

	return (
		<>
		{/* ê²€ìƒ‰ì—”ì§„ ìµœì í™”ë¥¼ h1íƒœê·¸ì—ì„œ í•œë‹¤ SEO(Search Engine Optimization)ì— ëŒ€í•´ì„œ ì°¾ê¸° */}
			<h1>Movie App</h1>
			
		</>
	)
}